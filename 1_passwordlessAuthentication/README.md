# Passwordless Authentication

## Pre-requisites

1. Ensure that the VM is up and running.
2. Ensure that the VM's NSG is allowing traffic on **port 22**

## Steps

1. Open the WSL shell and navigate to the directory **1_passwordlessAuthentication**
2. Ensure that you have a public key in _~/.ssh/_ by `ls -al ~/.ssh/id_*.pub`
3. If you don't have a public key for your user, you can generate one by `ssh-keygen -t rsa -b 4096 -C "<your-email-id>"`
4. Check if the public key is generated by `ls -al ~/.ssh/id_*.pub`
5. Download the private key from the portal or keep handy when you installed it
6. Move the private key to _~/.ssh/_ by `mv <private-key-location> ~/.ssh/`
   Example: `mv demo_key.pem ~/.ssh/`
7. Make sure to tone down the privilege of the private key by `chmod 400 <new-private-key-location>` \
   Example: `chmod 400 ~/.ssh/demo_key.pem`
8. Run `ssh-copy-id -f "-o IdentityFile <new-private-key-location>" <user>@<vm-public-ip>` \
   Example: `ssh-copy-id -f "-o IdentityFile ~/.ssh/demo_key.pem" azureuser@1.2.3.4`
9. Follow the instructions provided by the output of the above step. It will ask to run `ssh -o ' IdentityFile <new-private-key-location>' '<user>@<vm-public-ip>'` \
   Example: `ssh -o ' IdentityFile ~/.ssh/demo_key.pem' 'azureuser@1.2.3.4'`
10. Try exiting the session by `Ctrl + D` and re-login using `ssh <user>@<vm-public-ip>` \
    Example: `ssh azureuser@4.3.2.1`
11. Done! You should be able to login without having to mention any private key from now on

## References

1. [Ansible Passwordless Authentication](https://www.youtube.com/watch?v=ogLi-Tn-80A&list=PLdpzxOOAlwvLxd5nmtmORCmhD5jkrNbuE&index=2)
2. [Medium | Passwordless Authentication](https://linuxize.com/post/how-to-setup-passwordless-ssh-login/#:~:text=The%20easiest%20way%20to%20copy%20your%20public%20key,to%20enter%20the%20remote_username%20password%3A%20remote_username%40server_ip_address%27s%20password%3A%20Copy)